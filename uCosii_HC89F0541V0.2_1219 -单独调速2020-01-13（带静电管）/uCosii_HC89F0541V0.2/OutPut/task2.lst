C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE TASK2
OBJECT MODULE PLACED IN .\OutPut\task2.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Source\task2.c LARGE OPTIMIZE(9,SPEED) BROWSE INCDIR(.\Source;.\uCosii) 
                    -DEBUG OBJECTEXTEND PRINT(.\OutPut\task2.lst) TABS(2) OBJECT(.\OutPut\task2.obj)

line level    source

   1          #include "includes.h"
   2          #include "Source\task2.h"
   3          /**********************************************
   4          *Ö¸Ê¾µÆ
   5          *°´¼ü&×Ô¼ì
   6          *
   7          ************************************/
   8          unsigned char guc_Uartbuf_a1[12] = {0,0,0,0,0,0,0,0,0,0,0,0}; //ÓÃÓÚ´æ·Å½ÓÊÕÊÕ¾Ý
   9          unsigned char guc_AdcFlag  = 0;         //ADC×ª»»Íê³É±êÖ¾Î»
  10          
  11          
  12          unsigned int f2_kaiji = 0;//ÓÃÓÚ¿ª»úµÆÉÁ3´Î¼ÆÊý 
  13          unsigned int f2_ap = 0;//¿ìÉÁÂýÉÁÄ£Ê½ 3Ãë¿ìÉÁ5ÃëÂýÉÁ
  14          
  15          
  16          
  17          INT8U f2_LED = 0;//LEDÉÁË¸¼ÆÊý
  18          INT8U BUZZER_flag = 1;//·äÃùÆ÷
  19          INT8U BUZZER_num = 30;//·äÃùÆ÷¼ÆÊýÆ÷£¬ÓÃÓÚÏìÓ¦Ê±¼ä
  20          
  21          INT8U f2_mode = 1;//Ä£Ê½0Í£Ö¹ 1¹­ÐÎ 2»Ø³ä 3³äµç 4¿ìÉÁ 5ÂýÉÁ 6Òì³£ 7·½Ïò°´¼ü 10¶¨µã 11´ý»ú 12³äµçÏÂ×ù 13ÑÓ±
             -ß
  22          INT8U TK_ZJ_num=0;//°´¼ü×Ô¼ì£¬¹ýÁË3¾Í²»½øÈë
  23          int TK_ZJ_num1=0;//°´¼ü×Ô¼ì£¬¹ýÁË5s¾Í²»½øÈë
  24          INT8U TK_ZJ=0;//×Ô¼ìÄ£Ê½
  25          INT8U TK_ZJ1=0;//×Ô¼ìÄ£Ê½,·ÀÖ¹ËÉ¿ªÊÇÌø³ö
  26          INT8U ZJ_num=0;//×Ô¼ìÄ£Ê½ÏÂ¼ÆÊý
  27          INT8U ZJ_num1=0;//×Ô¼ìÄ£Ê½ÏÂÏîÄ¿¼ÆÊý
  28          INT8U ZJ_num2=0;//×Ô¼ìÄ£Ê½ÏÂÏîÄ¿¼ÆÊý
  29          
  30          
  31          INT8U TK_L_num=0;//°´¼ü×ó·À¶¶¶¯
  32          INT8U TK_R_num=0;//°´¼üÓÒ·À¶¶¶¯
  33          
  34          
  35          INT8U ZJ_wifi_flag=0;//×Ô¼ìÄ£Ê½ÏÂ²âÊÔwifi
  36          INT8U TK_ZJ_L=0;//×Ô¼ìÄ£Ê½,×ó°´¼ü
  37          INT8U TK_ZJ_R=0;//×Ô¼ìÄ£Ê½,ÓÒ°´¼ü
  38          
  39          /**************³äµç********************/
  40          INT8U f2_chongdian_flag = 0;//³äµç²åÈë¼ÆÊýÆ÷
  41          INT32U f2_chongdian_jishuqi=0;//3Ð¡Ê±×Ô¶¯Ìø
  42          INT32U f2_chongdian_jishuqi2=0;//¿ª¹Ø¹Ø±Õ¼ÆÊ±Æ÷,·ÀÖ¹µçÑ¹²»ÎÈ
  43          int f2_chongdian_flag1 = 0;//³äµçºìÌøÂÌ
  44          INT8U bat_mode = 0;//³äµçÄ£Ê½  1¿ìËÙ³äµç 2ä¸Á÷³äµç  3³äµçÍê³É
  45          INT8U bat_i =0;//·ÀÖ¹¶¶¶¯
  46          INT32U bat_i1 =0;//ä¸Á÷·ÀÖ¹¶¶¶¯
  47          /*******************´ý»ú*****************/
  48          INT32U f2_daiji_flag1 = 0;//´ý»ú×´Ì¬
  49          
  50          /**********Òì³£*********/
  51          int f2_buzzer_num = 0;//·äÃùÆ÷
  52          INT8U error_pengzhuang = 0;//¼ÆÊý£¬Åö×²Òì³£
  53          INT8U error_xuankong = 0;//¼ÆÊý£¬Ðü¿ÕÒì³£
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 2   

  54          INT8U error_bianshua = 0;//¼ÆÊý£¬±ßË¢Òì³£
  55          INT8U error_fengji = 0;//¼ÆÊý£¬·ç»úÒì³£
  56          INT8U error_luanzi_L = 0;//¼ÆÊý£¬·ç»úÒì³£
  57          INT8U error_luanzi_R = 0;//¼ÆÊý£¬·ç»úÒì³£
  58          INT8U error_dianliang = 0;//¼ÆÊý£¬µçÁ¿µÍ
  59          INT8U error_flag = 0;//±êÖ¾,1Åö×²£¬2Ðü¿Õ£¬3±ßË¢£¬4·ç»ú£¬5×óÂÖ£¬6ÓÒÂÖ£¬7µçÁ¿
  60          int f2_dianliang =0;//µçÁ¿ 0-100
  61          INT8U f2_dianliang_wifi = 80;//wifi·¢ËÍµçÁ¿
  62          INT8U f2_dianliang_num  = 0;//wifi·¢ËÍµçÁ¿¼ÆÊýÆ÷
  63          int f2_dianliang_sum[10]={0,0,0,0,0,0,0,0,0,0};//wifi·¢ËÍµçÁ¿ÇóºÍ
  64          INT8U error_dj2=0;//¶à¸öµØ¼ìÐü¿ÕÔÝÍ£ÑÓ³Ù
  65          /************wifi****************/
  66          int f2_wifi_num = 0;//1000·¢Ò»´Î×´Ì¬
  67          
  68          
  69          
  70          /****************ADC*******************/
  71          INT16U ADC_0,ADC_1, ADC_2,ADC_3,ADC_4, ADC_5,ADC_6,ADC_7;
  72          INT16U DJ_L_ADC,DJ_M_ADC,DJ_R_ADC;  
  73          INT16U DJ_L_flag,DJ_M_flag,DJ_R_flag;//1ÎªÒì³£0Î»Õý³£ 
  74          INT8U DJ_L_num,DJ_M_num,DJ_R_num;//ADC¶¶¶¯
  75          bool sensor_error = 0;//´«¸ÐÆ÷×´Ì¬£¬µØ¼ìÇ½¼ìÅö×²
  76          bool sensor_error_dj = 0;//´«¸ÐÆ÷×´Ì¬£¬µØ¼ì
  77          
  78          INT8U ADC_ait = 0;
  79          
  80          //f1
  81          extern INT8U f1_wifi_num ;//·¢ËÍÖ¸Áî 1¿ìÉÁ 2ÂýÉÁ 3²âÊÔwifi
  82          //·ç»ú
  83          //·ç»ú
  84          extern INT8U f1_fj_xili;//·ç»úÎüÁ¦ 0Ç¿ 1ÖÐ 2Èô
  85          extern INT8U f1_fj_xili2 ;//·ç»ú×ªËÙ
  86          
  87          //f3
  88          extern int f3_flag;//²½ÖèÔËÐÐ£¬¹²100¶à²½Öè
  89          extern bool f3_flag0;//°´¼üÆô¶¯±êÖ¾£¬Ò»°ãÓÃÓÚ°´¼ü°´ÏÂÖ´ÐÐµÚÒ»´Î²Ù×÷
  90          extern INT8U f3_flag1;//¼ÇÂ¼±êÖ¾£¬Ò»°ãÓÃÓÚµÚÒ»´Î¸´Î»
  91          extern INT8U num_L1 ;     //×óÂÖÂëÅÌÖµ
  92          extern INT8U  num_R1;       //ÓÒÂÖÂëÅÌÖµ
  93          extern bool fan_open ;//·ç»ú¿ªÆô1,¹Ø±Õ0
  94          
  95          void Task2(void *ppdata) reentrant
  96          {
  97   1        ppdata = ppdata;
  98   1        OSTimeDly(100);
  99   1      
 100   1        while(1){ 
 101   2      /***********************¿´ÃÅ¹·*******************************/
 102   2        WDTC |= 0x10;                   //Çå¹·
 103   2      /*************************************************************/   
 104   2        f2_wifi_num++;//1000·¢Ò»´Î×´Ì¬  
 105   2      /***********************LEDµÆ×´Ì¬ÏÔÊ¾***************************/   
 106   2        f2_ledshow();
 107   2      /***********************·äÃùÆ÷**********************************/       
 108   2        f2_BUZZER();    
 109   2      /***********************°´¼ü¼ì²â********************************/     
 110   2        f2_touch();
 111   2      /***********************´ý»úÇÐ»»*******************************/  
 112   2        f2_standby();//´ý»úÇÐ»» 
 113   2      /***********************×Ô¼ìÄ£Ê½(³ö³§×Ô¼ì)**********************/   
 114   2        f2_ZJ_MODE();//×Ô¼ìÄ£Ê½
 115   2      //  OSTimeDly(30);
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 3   

 116   2      
 117   2        if(f2_mode!=11)
 118   2        {
 119   3          f2_Get_ADC(0);//»ñÈ¡ADC,ÏÂ´Î²É¼¯Îªvdd
 120   3          OSTimeDly(1);
 121   3          DJ_L_ADC=ADC_5;//×óµØ¼ì£¬´ËÊ±µØ¼ìºìÍâ´ò¿ª£¬½ÓÊÕÖµÓ¦±È¹Ø±ÕºìÍâµÍ
 122   3          DJ_M_ADC=ADC_6;//ÖÐµØ¼ì£¬´ËÊ±µØ¼ìºìÍâ´ò¿ª£¬½ÓÊÕÖµÓ¦±È¹Ø±ÕºìÍâµÍ
 123   3          DJ_R_ADC=ADC_7;//ÓÒµØ¼ì£¬´ËÊ±µØ¼ìºìÍâ´ò¿ª£¬½ÓÊÕÖµÓ¦±È¹Ø±ÕºìÍâµÍ
 124   3        }
 125   2      
 126   2      if(ADC_ait==0)
 127   2        {
 128   3      /***********************Òì³£¼ì²â********************************/ 
 129   3        f2_error();
 130   3      /***********************Òì³£±¨¾¯********************************/   
 131   3        f2_error_buzzer();    
 132   3      /***********************³äµç¼ì²â********************************/   
 133   3        f2_power();
 134   3      /************************µç³Ø³äµç&µçÁ¿&µç³ØÒì³£±¨´í*************/ 
 135   3        f2_bat();//µç³Ø³äµç&µçÁ¿      
 136   3      } 
 137   2        
 138   2        
 139   2        floor = 0;//µØ¼ìÊ¹ÄÜ¹Ø±Õ
 140   2        OSTimeDly(2);
 141   2      
 142   2        if(f2_mode!=11)
 143   2        {
 144   3          if(ADC_ait)
 145   3          {
 146   4            f2_Get_ADC(ADC_ait);//»ñÈ¡ADC,ÏÂ´Î²É¼¯Îª4V,±¾´ÎÎªVDD,ÎªµØ¼ìADC
 147   4            OSTimeDly(2);
 148   4            ADC_ait=0;
 149   4          }
 150   3          else
 151   3          {
 152   4            f2_Get_ADC(ADC_ait);//»ñÈ¡ADC,ÏÂ´Î²É¼¯ÎªVDD,±¾´ÎÎª4V,ÎªÆäËûADC
 153   4            OSTimeDly(2);
 154   4            ADC_ait=1;    
 155   4          }   
 156   3        }
 157   2        
 158   2        
 159   2      
 160   2      
 161   2        if(f2_mode!=3&&f2_mode!=11&&ADC_ait==0)
 162   2        {
 163   3          /*************µØ¼ì¼ì²â************************/   
 164   3            f2_DJ_mode(ADC_5,DJ_L_ADC,1);//×óµØ¼ì
 165   3            f2_DJ_mode(ADC_6,DJ_M_ADC,2);//×óµØ¼ì
 166   3            f2_DJ_mode(ADC_7,DJ_R_ADC,3);//×óµØ¼ì 
 167   3        
 168   3      //      IE &=~ 0x10;        //ÔÊÐíUART1ÖÐ¶Ï
 169   3      //      SBUF = ADC_5/100;//task1·¢ËÍ8Î»´®¿ÚÊý¾Ý
 170   3      //      while(!(SCON & 0x02));
 171   3      //      SCON &=~ 0x02;      //Çå³ý·¢ËÍÖÐ¶Ï±êÖ¾Î»    
 172   3      //    
 173   3      //      IE &=~ 0x10;        //ÔÊÐíUART1ÖÐ¶Ï
 174   3      //      SBUF = ADC_5%100;//task1·¢ËÍ8Î»´®¿ÚÊý¾Ý
 175   3      //      while(!(SCON & 0x02));
 176   3      //      SCON &=~ 0x02;      //Çå³ý·¢ËÍÖÐ¶Ï±êÖ¾Î»        
 177   3      //    
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 4   

 178   3      //    
 179   3      //      IE &=~ 0x10;        //ÔÊÐíUART1ÖÐ¶Ï
 180   3      //      SBUF = DJ_L_ADC/100;//task1·¢ËÍ8Î»´®¿ÚÊý¾Ý
 181   3      //      while(!(SCON & 0x02));
 182   3      //      SCON &=~ 0x02;      //Çå³ý·¢ËÍÖÐ¶Ï±êÖ¾Î»    
 183   3      //    
 184   3      //      IE &=~ 0x10;        //ÔÊÐíUART1ÖÐ¶Ï
 185   3      //      SBUF = DJ_L_ADC%100;//task1·¢ËÍ8Î»´®¿ÚÊý¾Ý
 186   3      //      while(!(SCON & 0x02));
 187   3      //      SCON &=~ 0x02;      //Çå³ý·¢ËÍÖÐ¶Ï±êÖ¾Î»      
 188   3      //    
 189   3      //    
 190   3      //      IE &=~ 0x10;        //ÔÊÐíUART1ÖÐ¶Ï
 191   3      //      SBUF = 170;//task1·¢ËÍ8Î»´®¿ÚÊý¾Ý
 192   3      //      while(!(SCON & 0x02));
 193   3      //      SCON &=~ 0x02;      //Çå³ý·¢ËÍÖÐ¶Ï±êÖ¾Î»      
 194   3      
 195   3        }
 196   2      
 197   2      
 198   2        
 199   2        if(f2_mode!=3&&f2_mode!=11)//²»ÔÚ³äµçºÍ´ý»ú
 200   2          floor = 1;//µØ¼ìÊ¹ÄÜ´ò¿ª
 201   2        
 202   2        
 203   2      
 204   2        
 205   2        
 206   2        OSTimeDly(1);
 207   2        }}
 208          
 209            
 210          void f2_standby(void)//´ý»úÇÐ»» 
 211          {
 212   1      /**********´ý»úÇÐ»»**************************/
 213   1      if((f2_mode==4||f2_mode==5)&&f2_daiji_flag1<standby_wifi_time)  //¿ìÂýÉÁÇÐ»»
 214   1      {
 215   2          if(f2_dianliang<=10)//µçÁ¿Ð¡ÓÚ10
 216   2            f2_daiji_flag1=f2_daiji_flag1+10;
 217   2          else
 218   2            f2_daiji_flag1++;
 219   2      }
 220   1      if((f2_mode==4||f2_mode==5)&&f2_daiji_flag1>=standby_wifi_time) //¿ìÂýÉÁÇÐ»»
 221   1      {
 222   2        f2_mode=0;
 223   2        f3_flag=-1;
 224   2        f3_flag1=0;
 225   2        f2_daiji_flag1 = 0;
 226   2      }   
 227   1      if(f2_mode==6&&f2_daiji_flag1<standby_error_time) //Òì³£ÇÐ»»
 228   1      {
 229   2          if(f2_dianliang<13&&f2_dianliang>5)//µçÁ¿Ð¡ÓÚ10
 230   2            f2_daiji_flag1++;
 231   2          else if(f2_dianliang<=5)
 232   2            f2_daiji_flag1=f2_daiji_flag1+10;
 233   2          else
 234   2            f2_daiji_flag1++;
 235   2      }   
 236   1      if(f2_mode==6&&f2_daiji_flag1>=standby_error_time)//Òì³£ÇÐ»»
 237   1      {
 238   2        if(error_flag==7)//µçÁ¿Òì³£
 239   2        {
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 5   

 240   3          f2_mode=11;//ÐÝÃßÄ£Ê½
 241   3          Wifi =0;//¹Ø±Õwifi
 242   3        }
 243   2        else
 244   2          f2_mode=0;//´ý»úÄ£Ê½
 245   2        f2_daiji_flag1=0;
 246   2      }   
 247   1      if(f2_mode==0&&f2_daiji_flag1<standby_sleep_time&&TK_ZJ!=1)//Í£Ö¹µ½´ý»ú
 248   1        f2_daiji_flag1++;   
 249   1      if(f2_mode==0&&f2_daiji_flag1>=standby_sleep_time&&TK_ZJ!=1)//Í£Ö¹µ½´ý»ú
 250   1      {
 251   2        Wifi=0; //¹Ø±Õwifi
 252   2        f2_mode=11;
 253   2        f2_daiji_flag1=0;
 254   2      }     
 255   1      if(f2_mode==11)//¹Ø±Õwifi
 256   1      {
 257   2        if(f2_daiji_flag1<10)
 258   2          f2_daiji_flag1++;
 259   2        if(f2_daiji_flag1==10)
 260   2        {
 261   3          f2_daiji_flag1++;
 262   3          Wifi=0;//¹Ø±Õwifi
 263   3          mapan = 0;//5V¹©µçÊ¹ÄÜ¹Ø±Õ
 264   3          /***********************************½øÈë¿ÕÏÐÄ£Ê½***************************************/
 265   3          PCON |= 0x01;           //½øÈë¿ÕÏÐÄ£Ê½
 266   3        }
 267   2        
 268   2      } 
 269   1      
 270   1      }
 271          
 272            
 273          void f2_bat(void)//µç³Ø³äµç&µçÁ¿&µç³ØÒì³£±¨´í
 274          {
 275   1        if(f2_mode!=11)
 276   1        {
 277   2          if(f2_mode!=3)//·Ç³äµçÄ£Ê½
 278   2          {
 279   3            if(ADC_4>=2830)//100%µçÁ¿
 280   3              f2_dianliang=100;
 281   3            else//5.4
 282   3              f2_dianliang=100-(2820-ADC_4)/5.88;
 283   3            if( (f2_mode==1||f2_mode==10||f2_mode==7)&&TK_ZJ==0)//¹¤×÷Ä£Ê½ÏÂ
 284   3            {
 285   4              if(f1_fj_xili==0)//·ç»úÎüÁ¦ 0Ç¿ 1ÖÐ 2Èô
 286   4                f2_dianliang+=30;
 287   4              else if(f1_fj_xili==1)
 288   4                f2_dianliang+=20;
 289   4              else
 290   4                f2_dianliang+=10;
 291   4            
 292   4            }
 293   3              
 294   3          }
 295   2          else//³äµçÄ£Ê½
 296   2          {
 297   3            if(bat_mode!=2)
 298   3            {
 299   4              if(ADC_4>=2820)//100%µçÁ¿
 300   4                f2_dianliang=100;
 301   4              else
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 6   

 302   4                f2_dianliang=(100-(2820-ADC_4)/5.5);
 303   4            }
 304   3      
 305   3          
 306   3          }
 307   2          if(f2_dianliang>100)
 308   2            f2_dianliang=100;
 309   2          if(f2_dianliang<5)
 310   2            f2_dianliang=5;
 311   2      
 312   2          //ÇóºÍ20´Î,È»ºówifi·¢ËÍ
 313   2            if(f2_dianliang_num<10)
 314   2            {
 315   3              f2_dianliang_num++;
 316   3              f2_dianliang_sum[f2_dianliang_num]=f2_dianliang;
 317   3      //        f2_dianliang_sum+=f2_dianliang;
 318   3            }
 319   2            else
 320   2            {
 321   3              bubbleSort(f2_dianliang_sum,10);
 322   3              f2_dianliang_wifi=f2_dianliang_sum[5];
 323   3              f2_dianliang_num=0;
 324   3            }
 325   2      
 326   2          
 327   2        /**********µÍµçÁ¿¼ì²â***********************/   
 328   2          if(f2_dianliang_wifi<=15&&TK_ZJ==0&&f2_mode!=3)
 329   2          {
 330   3            if(error_dianliang<1000)
 331   3              error_dianliang++;
 332   3          }
 333   2          else
 334   2          {
 335   3      //      if(error_dianliang>10)
 336   3      //        error_dianliang=error_dianliang-10;
 337   3      //      else
 338   3              error_dianliang=0;
 339   3          
 340   3          }
 341   2          if(error_dianliang==1000)//Òì³£±¨´í
 342   2          {
 343   3            error_dianliang++;
 344   3            error_flag = 7;
 345   3            f2_mode = 6;//Òì³£    
 346   3            f3_flag=-1;//²½Öè-1
 347   3            f3_flag1=0;
 348   3          } 
 349   2        /**********³äµç***********************/       
 350   2          if(f2_mode==3)
 351   2          {
 352   3      
 353   3            error_dianliang=0;
 354   3            
 355   3            if(f2_chongdian_jishuqi<1080000)//3Ð¡Ê±×Ô¶¯Ìø
 356   3              f2_chongdian_jishuqi++;
 357   3            else
 358   3              f2_chongdian_flag1=100;//ÁÁÂÌµÆ
 359   3            //bat_mode = 1;//³äµçÄ£Ê½  1¿ìËÙ³äµç 2ä¸Á÷³äµç  3³äµçÍê³É
 360   3            if(bat_mode==1)//³äµçÄ£Ê½  1¿ìËÙ³äµç
 361   3            {
 362   4              if(power_enabled )
 363   4              {
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 7   

 364   5                if(f2_chongdian_jishuqi2<=50)
 365   5                  f2_chongdian_jishuqi2++;
 366   5              }
 367   4              else
 368   4                f2_chongdian_jishuqi2=0;
 369   4              if(f2_chongdian_jishuqi2>=50)
 370   4              {
 371   5                bat_mode = 2;
 372   5                f2_chongdian_jishuqi2 = 0;
 373   5              } 
 374   4            }
 375   3            if(bat_mode==2)//³äµçÄ£Ê½  2ä¸Á÷³äµç
 376   3            {
 377   4              f2_chongdian_flag1=100;//ÁÁÂÌµÆ 
 378   4            } 
 379   3            
 380   3      
 381   3            
 382   3      
 383   3            
 384   3          }
 385   2          
 386   2      
 387   2        }
 388   1      
 389   1      }
 390          
 391          
 392          
 393          
 394          void f2_power(void)//³äµç¼ì²â 
 395          {
 396   1      //³äµç¼ì²â
 397   1        if(power==0&&f2_mode!=3&&TK_ZJ==0)
 398   1        {
 399   2          if(f2_chongdian_flag<3)
 400   2          {
 401   3            bat_mode = 0;//³äµçÄ£Ê½  1¿ìËÙ³äµç 2ä¸Á÷³äµç  3³äµçÍê³É
 402   3            f2_chongdian_flag++;//³äµç²åÈë¼ÆÊýÆ÷
 403   3            f2_chongdian_flag1=0;//³äµçºìÌøÂÌ
 404   3            f2_chongdian_jishuqi=0;//3Ð¡Ê±×Ô¶¯Ìø£¬1000000
 405   3          }
 406   2          if(f2_chongdian_flag==3)
 407   2          {
 408   3            bat_i =0;//·ÀÖ¹¶¶¶¯
 409   3            bat_mode = 1;//³äµçÄ£Ê½  1¿ìËÙ³äµç 2ä¸Á÷³äµç  3³äµçÍê³É
 410   3            fan = 0;//¹Ø±Õ·ç»ú
 411   3            fan_open = 0;//·ç»ú¿ªÆô1,¹Ø±Õ0
 412   3            Brush = 0;//¹Ø±Õ±ßË¢
 413   3            floor = 0;//µØ¼ìÊ¹ÄÜ¹Ø±Õ
 414   3            f2_wifi_num=980;//·¢ËÍÖ¸Áî
 415   3            BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 416   3            BUZZER_flag=1;//¿ªÆô·äÃùÆ÷  
 417   3            f3_flag=-1;
 418   3            f2_kaiji = 300;//¿ª»úµÆÉÁ3´Î
 419   3            f3_flag1 = 0;
 420   3            f2_mode = 3;
 421   3          }
 422   2      
 423   2        }
 424   1      //°Îµô³äµç
 425   1        if(power==1&&f2_mode==3&&TK_ZJ==0)  
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 8   

 426   1        {
 427   2          if(f2_chongdian_flag==10)//³äµç²åÈë¼ÆÊýÆ÷
 428   2          {
 429   3            f2_chongdian_flag--;
 430   3            BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 431   3            BUZZER_flag=1;//¿ªÆô·äÃùÆ÷
 432   3            f2_kaiji = 300;
 433   3          }
 434   2          if(f2_chongdian_flag<10)//³äµç²åÈë¼ÆÊýÆ÷
 435   2          {
 436   3            f2_chongdian_flag--;
 437   3            if(f2_chongdian_flag==0)
 438   3            {
 439   4              f2_wifi_num=980;//·¢ËÍÖ¸Áî
 440   4              f2_kaiji = 300;//¿ª»úµÆÉÁ
 441   4              f2_mode=0;//Í£Ö¹
 442   4              f3_flag0 = 1; //°´¼üÆô¶¯±êÖ¾£¬Ò»°ãÓÃÓÚ°´¼ü°´ÏÂÖ´ÐÐµÚÒ»´Î²Ù×÷
 443   4              BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 444   4              BUZZER_flag=1;//¿ªÆô·äÃùÆ÷
 445   4            }
 446   3          }
 447   2        }
 448   1      
 449   1      }
 450            
 451            
 452            
 453            
 454            
 455            
 456            
 457            
 458            
 459            
 460            
 461            
 462            
 463            
 464            
 465            
 466          void f2_touch(void)//°´¼ü¼ì²â 
 467          {
 468   1        if(L1_touch==~touch_test)//×ó°´¼ü°´ÏÂÈ¥
 469   1        {
 470   2          if(TK_L_num<3)//·À¶¶¶¯
 471   2          {
 472   3            TK_L_num++;
 473   3          }
 474   2        }
 475   1        if(R1_touch==~touch_test)//ÓÒ°´¼ü°´ÏÂÈ¥
 476   1        {
 477   2          if(TK_R_num<3)//·À¶¶¶¯
 478   2          {
 479   3            TK_R_num++;
 480   3          }
 481   2          if(f2_ap<500&&TK_ZJ==0)//APÄ£Ê½ 
 482   2            f2_ap++;//APÄ£Ê½  3Ãë¿ìÉÁ5ÃëÂýÉÁ
 483   2          if(f2_ap==300)
 484   2          {
 485   3            f2_daiji_flag1=0;//´ý»ú¼ÆÊýÆ÷
 486   3            f2_mode=4;//¿ìÉÁ
 487   3            f3_flag0 = 1;
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 9   

 488   3            BUZZER_flag=1;//¿ªÆô·äÃùÆ÷
 489   3            BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 490   3          }     
 491   2          if(f2_ap==499)
 492   2          {
 493   3            f2_daiji_flag1=0;//´ý»ú¼ÆÊýÆ÷
 494   3            f2_mode=5;//ÂýÉÁ
 495   3            BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 496   3            BUZZER_flag=1;//¿ªÆô·äÃùÆ÷
 497   3          
 498   3          }
 499   2        
 500   2        }
 501   1        if(L1_touch==touch_test)//×ó°´¼üÌ§Æð
 502   1        {
 503   2          if(TK_L_num==3)
 504   2          {
 505   3            f2_daiji_flag1 = 0;//´ý»ú¼ÆÊýÆ÷
 506   3            error_dianliang = 0;//µçÁ¿Òì³£
 507   3            f2_kaiji=300;
 508   3            TK_ZJ_num++;//×Ô¼ìÄ£Ê½¼ÆÊýÆ÷£¬¹ý3²»ÔÙ½øÈ¥
 509   3            BUZZER_flag=1;//¿ªÆô·äÃùÆ÷
 510   3            BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 511   3            if(TK_ZJ&&TK_ZJ1)//×Ô¼ìÄ£Ê½
 512   3            {
 513   4              ZJ_num2=0;//×Ô¼ìÄ£Ê½ÏÂÏîÄ¿¼ÆÊý
 514   4              TK_ZJ_L++;//×óÏîÄ¿
 515   4              TK_ZJ_R = 0;//Ð¡ÏîÄ¿ÇåÁã    
 516   4            }
 517   3            if(f2_mode==11)//´ý»úÄ£Ê½»½ÐÑ
 518   3            {
 519   4              Wifi = 1;
 520   4              mapan = 1;//5V¹©µçÊ¹ÄÜ¿ªÆô
 521   4              /***********************************ÍË³ö¿ÕÏÐÄ£Ê½***************************************/
 522   4                PCON &= ~0x01;            //½øÈë¿ÕÏÐÄ£Ê½
 523   4            } 
 524   3            if(f2_mode==0&&TK_ZJ==0)
 525   3              {
 526   4                f2_mode=1;//¹­ÐÎ
 527   4                f3_flag0 = 1;
 528   4              }       
 529   3              else
 530   3              {
 531   4                f2_mode=0;//Í£Ö¹
 532   4                f3_flag0 = 1; 
 533   4              } 
 534   3            f2_wifi_num=950;//·¢ËÍÖ¸Áî
 535   3          }
 536   2        
 537   2      
 538   2        
 539   2          TK_L_num=0;//·À¶¶¶¯
 540   2        }
 541   1        if(R1_touch==touch_test)//ÓÒ°´¼üÌ§Æð
 542   1        {
 543   2          if(f2_ap<300)//Ã»ÓÐ½øÈë¿ìÉÁ»òÕßÂýÉÁ
 544   2          {
 545   3            if(TK_R_num==3)
 546   3            {
 547   4              f2_daiji_flag1 = 0;//´ý»ú¼ÆÊýÆ÷
 548   4              error_dianliang = 0;//µçÁ¿Òì³£
 549   4              f2_kaiji=300;
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 10  

 550   4              TK_ZJ_num++;//×Ô¼ìÄ£Ê½¼ÆÊýÆ÷£¬¹ý3²»ÔÙ½øÈ¥
 551   4              BUZZER_flag=1;//¿ªÆô·äÃùÆ÷
 552   4              BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 553   4              if(TK_ZJ&&TK_ZJ1)//×Ô¼ìÄ£Ê½
 554   4              {
 555   5                ZJ_num2=0;//×Ô¼ìÄ£Ê½ÏÂÏîÄ¿¼ÆÊý
 556   5                TK_ZJ_R++;//×óÏîÄ¿
 557   5              }
 558   4              if(f2_mode==11)//´ý»úÄ£Ê½»½ÐÑ
 559   4              {
 560   5                Wifi = 1;
 561   5                mapan = 1;//5V¹©µçÊ¹ÄÜ¿ªÆô
 562   5                /***********************************ÍË³ö¿ÕÏÐÄ£Ê½***************************************/
 563   5                PCON &= ~0x01;            //½øÈë¿ÕÏÐÄ£Ê½
 564   5              } 
 565   4              if(f2_mode==0&&TK_ZJ==0)
 566   4              {
 567   5                f2_mode=10;//»Ø³å
 568   5                f3_flag0 = 1;
 569   5              } 
 570   4              else
 571   4              {
 572   5                f2_mode=0;//Í£Ö¹
 573   5                f3_flag0 = 1; 
 574   5              }
 575   4              f2_wifi_num=950;//·¢ËÍÖ¸Áî
 576   4            }
 577   3          }
 578   2          else if(f2_ap<499)
 579   2          { 
 580   3            f1_wifi_num=1;//¿ìÉÁ
 581   3          }   
 582   2          else
 583   2          {
 584   3            f1_wifi_num=2;//ÂýÉÁ
 585   3          }
 586   2          f2_ap=0;//ÓÒ°´¼ü¼ÆÊýÆ÷      
 587   2          TK_R_num=0;
 588   2        }
 589   1        if(TK_L_num==3&&TK_R_num==3&&TK_ZJ_num<3&&TK_ZJ==0&&f2_mode!=3)//×Ô¼ì
 590   1        {
 591   2          f3_flag =-1;
 592   2          f3_flag1=0;
 593   2          TK_ZJ =1;   
 594   2          BUZZER_flag=1;//¿ªÆô·äÃùÆ÷
 595   2          f2_kaiji = 300;//¿ª»úÉÁ3´Î£¬ÕâÀïÎªÌø³ö
 596   2        }
 597   1      //  if(TK_ZJ_num1<200)//2sºó²»ÔÚ½øÈë×Ô¼ì
 598   1      //    TK_ZJ_num1++;
 599   1      //  else
 600   1      //    TK_ZJ_num=3;
 601   1        
 602   1        
 603   1        
 604   1        
 605   1        
 606   1        
 607   1      }
 608          
 609          
 610          
 611          
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 11  

 612          
 613          void f2_error(void)
 614          {
 615   1        INT16U error_crash_1 =DJ_L_flag+DJ_M_flag+DJ_R_flag;
 616   1        if(crash)
 617   1          error_crash_1++;
 618   1        if(error_crash_1>0)
 619   1        sensor_error=1;
 620   1        else
 621   1        sensor_error=0;
 622   1        if(DJ_L_flag+DJ_M_flag+DJ_R_flag>0)//µØ¼ì±êÖ¾
 623   1        sensor_error_dj=1;
 624   1        else
 625   1        sensor_error_dj=0;
 626   1        if(f2_mode==1||f2_mode==10)//¹­ÐÎ  Ðý×ª
 627   1        {
 628   2          /**********Åö×²***********************/
 629   2          if(crash==0)
 630   2          error_pengzhuang=0;
 631   2        else
 632   2        {
 633   3          if(error_pengzhuang<200)
 634   3            error_pengzhuang++;   
 635   3        }
 636   2        if(error_pengzhuang==200)
 637   2        {
 638   3          f2_wifi_num=1001;//·¢ËÍÖ¸Áî
 639   3          error_pengzhuang++;
 640   3          error_flag = 1;
 641   3          f2_mode = 6;//Òì³£
 642   3              
 643   3          f3_flag=-1;//²½Öè-1
 644   3          f3_flag1=0;
 645   3        }
 646   2        /**********µØ¼ì***********************/
 647   2        if((DJ_L_flag+DJ_M_flag+DJ_R_flag)<3&&(DJ_L_flag+DJ_M_flag+DJ_R_flag)>0)
 648   2        {
 649   3          error_dj2=0;
 650   3          if(error_xuankong<150)
 651   3            error_xuankong++;     
 652   3        }
 653   2        else if(DJ_L_flag+DJ_M_flag+DJ_R_flag==3)//É¨µØ»úÄÃÆð
 654   2        {
 655   3          error_dj2++;
 656   3          if(error_dj2>=50)
 657   3          {
 658   4            f3_flag=-1;//²½Öè-1
 659   4            f3_flag1=0;   
 660   4            f2_mode = 0;
 661   4            BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 662   4            BUZZER_flag=1;//¿ªÆô·äÃùÆ÷
 663   4            error_dj2=0;
 664   4          }
 665   3              
 666   3        }
 667   2        else
 668   2        {
 669   3          error_dj2=0;
 670   3          error_xuankong=0;
 671   3        }
 672   2          
 673   2        if(error_xuankong==150)
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 12  

 674   2        {
 675   3          f2_wifi_num=1001;//·¢ËÍÖ¸Áî
 676   3          error_xuankong++;
 677   3          error_flag = 2;
 678   3          f2_mode = 6;//Òì³£    
 679   3          f3_flag=-1;//²½Öè-1
 680   3          f3_flag1=0;
 681   3        }
 682   2        /**********±ßË¢***********************/
 683   2        if(ADC_3>100)//ST
 684   2        {
 685   3          if(error_bianshua<100)
 686   3            error_bianshua++; 
 687   3        }
 688   2        else
 689   2          error_bianshua=0;
 690   2        if(error_bianshua==100)
 691   2        {
 692   3          f2_wifi_num=1001;//·¢ËÍÖ¸Áî
 693   3          error_bianshua++;
 694   3          error_flag = 3;
 695   3          f2_mode = 6;//Òì³£    
 696   3          f3_flag=-1;//²½Öè-1
 697   3          f3_flag1=0;
 698   3        }
 699   2        /**********·ç»ú***********************/
 700   2        if(fan_open&&f2_mode!=3)
 701   2        {
 702   3          if(ADC_2>250)//ST
 703   3          {
 704   4            if(error_fengji<200)
 705   4              error_fengji++; 
 706   4          }
 707   3          else if(ADC_2<=250&&ADC_2>=50)
 708   3          {
 709   4            if(error_fengji>0)
 710   4              error_fengji--; 
 711   4            else
 712   4              error_fengji=0; 
 713   4          }
 714   3          else//ADC_2<=80
 715   3            error_fengji++;
 716   3          
 717   3          if(error_fengji==200)
 718   3          {
 719   4            f2_wifi_num=1001;//·¢ËÍÖ¸Áî
 720   4            error_fengji++;
 721   4            error_flag = 4;
 722   4            f2_mode = 6;//Òì³£    
 723   4            f3_flag=-1;//²½Öè-1
 724   4            f3_flag1=0;
 725   4          }   
 726   3          if(f2_mode==7)
 727   3          {
 728   4          error_fengji=0;
 729   4          
 730   4          }
 731   3        
 732   3        }
 733   2        
 734   2        
 735   2      
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 13  

 736   2        
 737   2        
 738   2        /**********×óÂÖ***********************/
 739   2        if(ADC_1>80)//ST
 740   2      //  if(ADC_10>400)//HK
 741   2        {
 742   3          if(error_luanzi_L<50)
 743   3            error_luanzi_L++; 
 744   3        }
 745   2        else
 746   2          error_luanzi_L=0;
 747   2        if(error_luanzi_L==30)
 748   2        {
 749   3          f2_wifi_num=1001;//·¢ËÍÖ¸Áî
 750   3          error_luanzi_L++;
 751   3          error_flag = 5;
 752   3          f2_mode = 6;//Òì³£    
 753   3          f3_flag=-1;//²½Öè-1
 754   3          f3_flag1=0;
 755   3        }
 756   2        /**********ÓÒÂÖ***********************/
 757   2        if(ADC_0>80)//ST
 758   2        {
 759   3          if(error_luanzi_R<50)
 760   3            error_luanzi_R++; 
 761   3        }
 762   2        else
 763   2          error_luanzi_R=0;
 764   2        if(error_luanzi_R==30)
 765   2        {
 766   3          f2_wifi_num=1001;//·¢ËÍÖ¸Áî
 767   3          error_luanzi_R++;
 768   3          error_flag = 6;
 769   3          f2_mode = 6;//Òì³£    
 770   3          f3_flag=-1;//²½Öè-1
 771   3          f3_flag1=0;
 772   3        } 
 773   2        }
 774   1        
 775   1      }
 776            
 777            
 778            
 779            
 780            
 781            
 782            
 783            
 784            
 785          
 786          void f2_ZJ_MODE(void)//×Ô¼ìÄ£Ê½ 
 787          {
 788   1      //×Ô¼ìÄ£¿é  
 789   1        if(TK_ZJ)
 790   1        {
 791   2          if(TK_ZJ1==0 &&L1_touch==touch_test&&R1_touch==touch_test)
 792   2          {
 793   3            TK_ZJ1=1;
 794   3            f3_flag =-1;
 795   3            f3_flag1=0;
 796   3            Brush = 0;//±ßË¢¹Ø±Õ
 797   3            fan = 0;//·ç»ú¹Ø±Õ
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 14  

 798   3            fan_open = 0;//·ç»ú¿ªÆô1,¹Ø±Õ0
 799   3            BUZZER_num=100;//·äÃùÆ÷Ãù½ÐÊ±¼ä
 800   3            ZJ_num= 0;//×Ô¼ìÄ£Ê½ÏÂ¼ÆÊý
 801   3          }
 802   2          if(TK_ZJ_L%6==1)//×Ô¼ì´óÄ£¿é1.µØ¼ì
 803   2          {
 804   3            f3_flag =-1;
 805   3            f3_flag1=0;
 806   3            Brush = 0;//±ßË¢¹Ø±Õ
 807   3            fan = 0;//·ç»ú¹Ø±Õ
 808   3            fan_open = 0;//·ç»ú¿ªÆô1,¹Ø±Õ0
 809   3            if(TK_ZJ_R%3==0)//×Ô¼ìÏîÄ¿1.1 ×óµØ¼ì
 810   3            {
 811   4              if(DJ_L_flag)//ÀëµØ
 812   4              f2_GRled(0,1);
 813   4              else
 814   4              f2_GRled(1,0);
 815   4            }
 816   3            if(TK_ZJ_R%3==1)//×Ô¼ìÏîÄ¿1.1 ×óµØ¼ì
 817   3            {
 818   4              if(DJ_M_flag)//ÀëµØ
 819   4              f2_GRled(0,1);
 820   4              else
 821   4              f2_GRled(1,0);
 822   4            }
 823   3            if(TK_ZJ_R%3==2)//×Ô¼ìÏîÄ¿1.1 ×óµØ¼ì
 824   3            {
 825   4              if(DJ_R_flag)//ÀëµØ
 826   4              f2_GRled(0,1);
 827   4              else
 828   4              f2_GRled(1,0);
 829   4            }
 830   3          }
 831   2          if(TK_ZJ_L%6==2)//×Ô¼ì´óÄ£¿é2.Åö×²
 832   2          { 
 833   3            if(TK_ZJ_R%2==0)//×Ô¼ìÏîÄ¿2.1 Åö×²
 834   3            {
 835   4              ZJ_wifi_flag = 0;
 836   4              ZJ_num1=0;//×Ô¼ìÄ£Ê½ÏÂ¼ÆÊý
 837   4              ZJ_num2 = 0;//×Ô¼ìÄ£Ê½ÏÂ¼ÆÊý
 838   4              if(crash)
 839   4              f2_GRled(0,1);
 840   4              else
 841   4              f2_GRled(1,0);
 842   4            }
 843   3            else //wifi²âÊÔ
 844   3            {
 845   4             if(ZJ_num1==0)
 846   4             {
 847   5              ZJ_num1=1;
 848   5              f1_wifi_num=3;//²âÊÔwifi
 849   5             }
 850   4              if(ZJ_wifi_flag)
 851   4                f2_GRled(1,0);
 852   4              else
 853   4              {
 854   5                f2_GRled(0,1);
 855   5                ZJ_num1++;
 856   5                if(ZJ_num1>250)
 857   5                  ZJ_num1=0;
 858   5              }
 859   4                
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 15  

 860   4            }
 861   3          }
 862   2          if(TK_ZJ_L%6==3)//×Ô¼ì´óÄ£¿é3.µçÑ¹µçÁ÷²âÊÔ
 863   2          {
 864   3            if(TK_ZJ_R%6==0)//×Ô¼ìÏîÄ¿3.1 ×óÂÖµçÁ÷
 865   3            {
 866   4              if(ZJ_num2==0)
 867   4              {
 868   5                
 869   5                ZJ_num1=0;
 870   5                f3_flag=200;//²½Öè
 871   5                f3_flag1=0;
 872   5                ZJ_num2=1;
 873   5              }
 874   4              if(ADC_1>30)//×óÂÖAD 
 875   4              {
 876   5                if(ZJ_num1<10)
 877   5                  ZJ_num1++;  
 878   5              }
 879   4              else
 880   4              {
 881   5                if(ZJ_num1>0)
 882   5                  ZJ_num1--;      
 883   5              }
 884   4              if(ZJ_num1>3) 
 885   4              f2_GRled(0,1);
 886   4              else
 887   4              f2_GRled(1,0);
 888   4            }
 889   3            if(TK_ZJ_R%6==1)//×Ô¼ìÏîÄ¿3.2 ÓÒÂÖ
 890   3            {
 891   4              if(ZJ_num2==0)
 892   4              {
 893   5                ZJ_num1=0;
 894   5                f3_flag=201;//²½Öè
 895   5                f3_flag1=0;
 896   5                ZJ_num2=1;
 897   5              } 
 898   4              if(ADC_0 >30)//ÓÒÂÖAD         
 899   4              {
 900   5                if(ZJ_num1<10)
 901   5                  ZJ_num1++;  
 902   5              }
 903   4              else
 904   4              {
 905   5                if(ZJ_num1>0)
 906   5                  ZJ_num1--;      
 907   5              }
 908   4              if(ZJ_num1>3) 
 909   4              f2_GRled(0,1);
 910   4              else
 911   4              f2_GRled(1,0);
 912   4            }
 913   3            if(TK_ZJ_R%6==2)//×Ô¼ìÏîÄ¿3.3 ·çÉÈ
 914   3            {
 915   4              if(ZJ_num2==0)
 916   4              {
 917   5                ZJ_num1=0;
 918   5                f3_flag=-1;//²½Öè
 919   5                f3_flag1=0;
 920   5                ZJ_num2=1;
 921   5      //          fan=1;//¿ªÆô·ç»ú
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 16  

 922   5                fan_open = 1;//·ç»ú¿ªÆô1,¹Ø±Õ0
 923   5              }   
 924   4              if(f1_fj_xili2<900)//·ç»ú
 925   4              {
 926   5                if(ADC_2 >350)  //·çÉÈ 
 927   5                  f2_GRled(0,1);
 928   5                else
 929   5                  f2_GRled(1,0);
 930   5              }
 931   4              else
 932   4                if(ADC_2 >200)  //·çÉÈ 
 933   4                  f2_GRled(0,1);
 934   4                else
 935   4                  f2_GRled(1,0);
 936   4      
 937   4              
 938   4            }
 939   3            if(TK_ZJ_R%6==3)//×Ô¼ìÏîÄ¿3.4 ±ßË¢
 940   3            {
 941   4              if(ZJ_num2==0)
 942   4              {
 943   5                ZJ_num1=0;
 944   5                f3_flag=-1;//²½Öè
 945   5                f3_flag1=0;
 946   5                ZJ_num2=1;
 947   5                Brush=1;//¿ªÆô±ßË¢
 948   5                fan=0;//¹Ø±Õ·ç»ú
 949   5                fan_open = 0;//·ç»ú¿ªÆô1,¹Ø±Õ0
 950   5              }   
 951   4              if(ADC_3>30)  //±ßË¢ 
 952   4                f2_GRled(0,1);
 953   4              else
 954   4                f2_GRled(1,0);
 955   4            }
 956   3            if(TK_ZJ_R%6==4)//×Ô¼ìÏîÄ¿3.5 µç³ØµçÑ¹
 957   3            {
 958   4              if(ZJ_num2==0)
 959   4              {
 960   5                ZJ_num1=0;
 961   5                f3_flag=-1;//²½Öè
 962   5                f3_flag1=0;
 963   5                ZJ_num2=1;
 964   5                Brush=0;//¹Ø±Õ±ßË¢
 965   5                fan=0;//¹Ø±Õ·ç»ú
 966   5                fan_open = 0;//·ç»ú¿ªÆô1,¹Ø±Õ0
 967   5              }   
 968   4              if(ADC_4<1900)  //±ßË¢ 7v×óÓÒ,20%µÄµçÑ¹
 969   4                f2_GRled(0,1);
 970   4              else
 971   4                f2_GRled(1,0);
 972   4            }
 973   3            if(TK_ZJ_R%6==5)//×Ô¼ìÏîÄ¿3.6 ³äµç
 974   3            {
 975   4              if(ZJ_num2==0)
 976   4              {
 977   5                ZJ_num1=0;
 978   5                f3_flag=-1;//²½Öè
 979   5                f3_flag1=0;
 980   5                ZJ_num2=1;
 981   5              }   
 982   4              if(power==1)  //³äµç
 983   4                f2_GRled(0,1);
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 17  

 984   4              else
 985   4                f2_GRled(1,0);
 986   4            }
 987   3          }
 988   2          if(TK_ZJ_L%6==4)//ÂÖ×ÓËÙ¶È²âÊÔ
 989   2          {
 990   3            if(TK_ZJ_R%4==0)//×Ô¼ìÏîÄ¿4.1 ×óÂÖºóÍË ÂëÅÌ
 991   3            { 
 992   4              if(ZJ_num2==0)
 993   4              {
 994   5                Brush=0;//¹Ø±Õ±ßË¢
 995   5                fan=0;//¹Ø±Õ·ç»ú
 996   5                fan_open = 0;//·ç»ú¿ªÆô1,¹Ø±Õ0
 997   5                ZJ_num1=0;
 998   5                f3_flag=202;//²½Öè
 999   5                f3_flag1=0;
1000   5                ZJ_num2=1;
1001   5              } 
1002   4              if(num_L1<18||num_L1>30)
1003   4              {
1004   5                if(ZJ_num1<10)
1005   5                  ZJ_num1++;
1006   5              }
1007   4              else
1008   4                ZJ_num1 =0;
1009   4              if(ZJ_num1>7)
1010   4                f2_GRled(0,1);
1011   4              else
1012   4                f2_GRled(1,0);  
1013   4            }
1014   3            if(TK_ZJ_R%4==1)//×Ô¼ìÏîÄ¿4.2 ÓÒÂÖºóÍË ÂëÅÌ
1015   3            { 
1016   4              if(ZJ_num2==0)
1017   4              {
1018   5                ZJ_num1=0;
1019   5                f3_flag=203;//²½Öè
1020   5                f3_flag1=0;
1021   5                ZJ_num2=1;
1022   5              } 
1023   4              if(num_R1<18||num_R1>30)
1024   4              {
1025   5                if(ZJ_num1<10)
1026   5                  ZJ_num1++;
1027   5              }
1028   4              else
1029   4                ZJ_num1=0;
1030   4              if(ZJ_num1>7)
1031   4                f2_GRled(0,1);
1032   4              else
1033   4                f2_GRled(1,0);
1034   4            }     
1035   3            if(TK_ZJ_R%4==2)//×Ô¼ìÏîÄ¿4.3 ×óÓÒÂÖÇ°½ø ±ßË¢ ·ç»ú
1036   3            { 
1037   4              if(ZJ_num2==0)
1038   4              {
1039   5                Brush=1;//¿ªÆô±ßË¢
1040   5      //          fan=1;//¿ªÆô·ç»ú
1041   5                fan_open = 1;//·ç»ú¿ªÆô1,¹Ø±Õ0
1042   5                ZJ_num1=0;
1043   5                f3_flag=204;//²½Öè
1044   5                f3_flag1=0;
1045   5                ZJ_num2=1;
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 18  

1046   5              }
1047   4              if(ADC_0>20||ADC_1>20||ADC_2>300||ADC_3>30)
1048   4              {
1049   5                if(ZJ_num1<5)
1050   5                  ZJ_num1++;
1051   5              }
1052   4              if(ADC_0<20&&ADC_1<20&&ADC_2<300&&ADC_3<30)
1053   4                ZJ_num1=0;
1054   4              if(ZJ_num1==5)
1055   4                f2_GRled(0,1);
1056   4              else
1057   4                f2_GRled(1,0);  
1058   4            }
1059   3            if(TK_ZJ_R%4==3)//×Ô¼ìÏîÄ¿5.2 ×óÓÒÂÖºóÍË ±ßË¢ ·ç»ú
1060   3            { 
1061   4              if(ZJ_num2==0)
1062   4              {
1063   5                ZJ_num1=0;
1064   5                f3_flag=205;//²½Öè
1065   5                f3_flag1=0;
1066   5                ZJ_num2=1;
1067   5              } 
1068   4              if(ADC_0>20||ADC_1>20||ADC_2>300||ADC_3>30)
1069   4              {
1070   5                if(ZJ_num1<5)
1071   5                  ZJ_num1++;
1072   5              }
1073   4              if(ADC_0<20&&ADC_1<20&&ADC_2<300&&ADC_3<30)
1074   4                ZJ_num1=0;
1075   4              if(ZJ_num1==5)
1076   4                f2_GRled(0,1);
1077   4              else
1078   4                f2_GRled(1,0);  
1079   4            } 
1080   3          }
1081   2          if(TK_ZJ_L%6==5||TK_ZJ_L%6==0)//È«ÆÁÏÔÊ¾
1082   2          {
1083   3            if(ZJ_num2==0)
1084   3            {
1085   4              Brush=0;//¹Ø±Õ±ßË¢
1086   4              fan=0;//¹Ø±Õ·ç»ú
1087   4              fan_open = 0;//·ç»ú¿ªÆô1,¹Ø±Õ0
1088   4              ZJ_num1=0;
1089   4              f3_flag=-1;//²½Öè
1090   4              f3_flag1=0;
1091   4              ZJ_num2=1;
1092   4              } 
1093   3            if(ZJ_num1<10)
1094   3              f2_GRled(1,1);
1095   3            else
1096   3              f2_GRled(0,0);
1097   3            ZJ_num1++;
1098   3            if(ZJ_num1==20)
1099   3              ZJ_num1=0;  
1100   3          }
1101   2      
1102   2        }
1103   1      
1104   1      }
1105          
1106          
1107          
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 19  

1108          
1109          
1110          void f2_DJ_mode(INT16U f2_DJ_ADC,INT16U f2_DJ_ADC_old,INT16U f2_DJ_ADC_flag )//µØ¼ì
1111          {
1112   1        bool f2_DJ_mode_i;//±¾´Î¼ì²âÊÇ·ñÊÇÒì³£
1113   1        if((f2_DJ_ADC_old-f2_DJ_ADC)<DJ_num_test&& (f2_DJ_ADC_old>f2_DJ_ADC) )
1114   1        {
1115   2          
1116   2          f2_DJ_mode_i=1;//Ç½¼ì±êÖ¾ 1ÎªÒì³£
1117   2        }
1118   1        else
1119   1          f2_DJ_mode_i=0;//Ç½¼ì±êÖ¾ 1ÎªÒì³£ 
1120   1      //  if(f2_DJ_ADC_old<=f2_DJ_ADC)//¶Ô×ÅÌ«Ñô»òÕßÐü¿ÕºÜ¸ß
1121   1      //  {
1122   1      //    f2_DJ_mode_i=1;//Ç½¼ì±êÖ¾ 1ÎªÒì³£
1123   1      //  }
1124   1      
1125   1          
1126   1        
1127   1        
1128   1        
1129   1      
1130   1      
1131   1      
1132   1      
1133   1      
1134   1          switch (f2_DJ_ADC_flag)//ÅÐ¶ÏÊÇÄÄ¸öÇ½¼ìÅöÇ½
1135   1        {
1136   2          case 1://×ó
1137   2            if (f2_DJ_mode_i)
1138   2            {
1139   3              if(DJ_L_num<DJ_flag_sensitivity)
1140   3                DJ_L_num++;     
1141   3            }
1142   2            else  
1143   2              DJ_L_num = 0;
1144   2            break;
1145   2          case 2://ÖÐ
1146   2            if (f2_DJ_mode_i)
1147   2            {
1148   3              if(DJ_M_num<DJ_flag_sensitivity)
1149   3                DJ_M_num++;   
1150   3            }
1151   2            else  
1152   2              DJ_M_num = 0;
1153   2            break;
1154   2          case 3://ÓÒ
1155   2            if (f2_DJ_mode_i)
1156   2            {
1157   3              if(DJ_R_num<DJ_flag_sensitivity)
1158   3                DJ_R_num++;       
1159   3            }
1160   2            else  
1161   2              DJ_R_num = 0;//Ç½¼ì±êÖ¾ 1ÎªÒì³£
1162   2            break;
1163   2        } 
1164   1      
1165   1        if(DJ_L_num==DJ_flag_sensitivity )
1166   1          DJ_L_flag=1;//µØ¼ì±êÖ¾ 1ÎªÒì³£
1167   1        else
1168   1          DJ_L_flag=0;//µØ¼ì±êÖ¾ 1ÎªÒì³£
1169   1        if(DJ_R_num==DJ_flag_sensitivity )
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 20  

1170   1          DJ_R_flag=1;//µØ¼ì±êÖ¾ 1ÎªÒì³£
1171   1        else
1172   1          DJ_R_flag=0;//µØ¼ì±êÖ¾ 1ÎªÒì³£
1173   1        if(DJ_M_num==DJ_flag_sensitivity)
1174   1          DJ_M_flag=1;//µØ¼ì±êÖ¾ 1ÎªÒì³£
1175   1        else
1176   1          DJ_M_flag=0;//µØ¼ì±êÖ¾ 1ÎªÒì³£
1177   1        
1178   1      }
1179          
1180          
1181          
1182          
1183          
1184          void f2_ledshow(void)
1185          {
1186   1        if(f2_kaiji<300)//¿ª»úÉÁ3´Î 
1187   1        {
1188   2          f2_kaiji++;
1189   2          if(f2_kaiji%100<50)
1190   2          {
1191   3            G_led =0;//ÂÌµÆÁÁ
1192   3            R_led =0;//ºìµÆÁÁ
1193   3          }
1194   2          else
1195   2          {
1196   3            G_led =1;//ÂÌµÆÃð
1197   3            R_led =1;//ºìµÆÃð
1198   3          }
1199   2        }
1200   1        else//¿ª»úÉÁÍê3´Î
1201   1        {
1202   2          f2_LED++;//LEDÉÁË¸¼ÆÊý
1203   2          if(f2_mode==0&&TK_ZJ==0)//½ûÖ¹Ä£Ê½
1204   2          {
1205   3            f2_LED=0;
1206   3            f2_GRled(1,1);//ÂÌµÆÁÁ,ºìµÆÁÁ
1207   3            error_pengzhuang = 0;//Åö×²Òì³£
1208   3            error_xuankong = 0;//Ðü¿ÕÒì³£
1209   3            error_bianshua = 0;//±ßË¢Òì³£
1210   3            error_fengji = 0;//¼ÆÊý£¬·ç»úÒì³£
1211   3            error_luanzi_L = 0;//×óÂÖÒì³£
1212   3            error_luanzi_R = 0;//ÓÒÂÖÒì³£
1213   3            error_flag = 0;//Òì³£±êÖ¾Î»
1214   3          }
1215   2          if(f2_mode==1&&TK_ZJ==0)//Ö±×ß1
1216   2          { 
1217   3            if(f2_LED%100<50)
1218   3              f2_GRled(1,0);//ÂÌµÆÁÁ,ºìµÆÃð
1219   3            else
1220   3              f2_GRled(0,0);//ÂÌµÆÃð,ºìµÆÃð
1221   3          }
1222   2          if(f2_mode==4&&TK_ZJ==0)//¿ìÉÁ
1223   2          {
1224   3            if(f2_LED%20<10)
1225   3              f2_GRled(1,0);//ÂÌµÆÁÁ,ºìµÆÃð
1226   3            else
1227   3              f2_GRled(0,0);//ÂÌµÆÃð,ºìµÆÃð 
1228   3          }
1229   2          if(f2_mode==5&&TK_ZJ==0)//ÂýÉÁ
1230   2          {
1231   3            if(f2_LED%100<50)
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 21  

1232   3              f2_GRled(1,0);//ÂÌµÆÁÁ,ºìµÆÃð
1233   3            else
1234   3              f2_GRled(0,0);//ÂÌµÆÃð,ºìµÆÃð 
1235   3          } 
1236   2          if(f2_mode==6)//Òì³£
1237   2          {
1238   3            f2_GRled(0,1);//ÂÌµÆÃð,ºìµÆÁÁ
1239   3          }
1240   2          if(f2_mode==7)//wifi°´¼ü
1241   2          {
1242   3              f2_daiji_flag1 = 0;//´ý»ú¼ÆÊýÆ÷
1243   3              f2_GRled(1,1);//ÂÌµÆÁÁ,ºìµÆÁÁ 
1244   3          }   
1245   2          if(f2_mode==10&&TK_ZJ==0)//¶¨µãÄ£Ê½
1246   2          {
1247   3            if(f2_LED%100<50)
1248   3              f2_GRled(0,0);//ÂÌµÆÃð,ºìµÆÃð 
1249   3            else
1250   3              f2_GRled(1,1);//ÂÌµÆÁÁ,ºìµÆÁÁ
1251   3            
1252   3          }
1253   2          if(f2_mode==11)//´ý»úÄ£Ê½
1254   2          {
1255   3              f2_GRled(0,0);//ÂÌµÆÃð,ºìµÆÃð 
1256   3          }
1257   2      
1258   2          if(f2_mode==3&&TK_ZJ==0)//³äµçÄ£Ê½
1259   2          {
1260   3              error_dianliang =0;//³äµçÊ±ºòµçÁ¿Òì³£¼ì²âÖÃÎ»0
1261   3            if(f2_chongdian_flag1==100)
1262   3              f2_GRled(1,0);//ÂÌµÆÁÁ,ºìµÆÃð
1263   3            else
1264   3            {
1265   4              if(f2_LED%100<50)
1266   4              f2_GRled(0,1);//ÂÌµÆÃð,ºìµÆÁÁ
1267   4              else
1268   4              f2_GRled(0,0);//ÂÌµÆÃð,ºìµÆÃð     
1269   4            } 
1270   3          }
1271   2          if(f2_LED==100)
1272   2            f2_LED=0;
1273   2        }
1274   1        
1275   1      }
1276          
1277          void f2_error_buzzer(void)//Òì³£±¨¾¯
1278          {
1279   1          /**********Òì³£*******************************/ 
1280   1          if(f2_mode==6)//Òì³£
1281   1          {
1282   2      
1283   2            if(error_flag)
1284   2            {
1285   3              Brush=0;
1286   3              fan=0;
1287   3              fan_open = 0;//·ç»ú¿ªÆô1,¹Ø±Õ0
1288   3              if(error_flag==1)//Åö×²¿¨×¡£¬5Ãë¿éÏì1Éù
1289   3              {
1290   4                if(f2_buzzer_num==0)
1291   4              {
1292   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1293   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 22  

1294   5              }
1295   4                f2_buzzer_num++;    
1296   4              }
1297   3              if(error_flag==2)//Ðü¿Õ£¬5Ãë¿éÏì2Éù
1298   3              {
1299   4                if(f2_buzzer_num==0)
1300   4              {
1301   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1302   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1303   5              }
1304   4                if(f2_buzzer_num==50)
1305   4              {
1306   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1307   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1308   5              }
1309   4                f2_buzzer_num++;    
1310   4              }
1311   3              if(error_flag==3)//±ßË¢£¬5Ãë¿éÏì3Éù
1312   3              {
1313   4                if(f2_buzzer_num==0)
1314   4              {
1315   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1316   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1317   5              }
1318   4                if(f2_buzzer_num==50)
1319   4              {
1320   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1321   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷  
1322   5              }         
1323   4                if(f2_buzzer_num==100)
1324   4              {
1325   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1326   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1327   5              }
1328   4                f2_buzzer_num++;    
1329   4              }
1330   3              if(error_flag==4)//·ç»ú£¬5Ãë¿éÏì3Éù£¬¸ô1Ãë¿ìÏì2
1331   3              {
1332   4                if(f2_buzzer_num==0)
1333   4              {
1334   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1335   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1336   5              }
1337   4                if(f2_buzzer_num==50)
1338   4              {
1339   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1340   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷  
1341   5              }         
1342   4                if(f2_buzzer_num==100)
1343   4              {
1344   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1345   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1346   5              }
1347   4              if(f2_buzzer_num==200)
1348   4              {
1349   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1350   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1351   5              }
1352   4              if(f2_buzzer_num==250)
1353   4              {
1354   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1355   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 23  

1356   5              }
1357   4                f2_buzzer_num++;    
1358   4              }
1359   3              if(error_flag==5||error_flag==6)//ÂÖ×Ó£¬5Ãë¿éÏì2Éù£¬¸ô1Ãë¿ìÏì1
1360   3              {
1361   4                if(f2_buzzer_num==0)
1362   4              {
1363   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1364   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1365   5              }
1366   4                if(f2_buzzer_num==50)
1367   4              {
1368   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1369   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷  
1370   5              }         
1371   4              if(f2_buzzer_num==150)
1372   4              {
1373   5                BUZZER_num=30;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1374   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1375   5              }
1376   4                f2_buzzer_num++;    
1377   4              }
1378   3              if(error_flag==7)//µçÁ¿µÍ£¬¸ô1Ãë¿ìÏì1
1379   3              {
1380   4                if(f2_buzzer_num%100==0)
1381   4              {
1382   5                BUZZER_num=10;//·äÃùÆ÷Ãù½ÐÊ±¼ä
1383   5                BUZZER_flag=1;//¿ªÆô·äÃùÆ÷            
1384   5              }
1385   4                f2_buzzer_num++;    
1386   4              }
1387   3            }     
1388   2              if(f2_buzzer_num==500)
1389   2                f2_buzzer_num=0;
1390   2          }
1391   1      
1392   1      
1393   1      }
1394          
1395          /*************LEDÊ¹ÄÜ*******************/
1396          void f2_GRled(int G,int R)//LED
1397          {
1398   1        if(G==1)
1399   1          G_led =0;//ÂÌµÆÁÁ
1400   1        else
1401   1          G_led =1;//ÂÌµÆÃð
1402   1        if(R==1)
1403   1          R_led =0;//ºìµÆÁÁ
1404   1        else
1405   1          R_led =1;//ºìµÆÃð
1406   1      }
1407          
1408          
1409          
1410          /*************·äÃùÆ÷*******************/
1411          void f2_BUZZER(void)//·äÃùÆ÷
1412          {
1413   1      
1414   1        if(BUZZER_flag)//·äÃùÆ÷
1415   1        {
1416   2          BUZZER_num--;
1417   2          if(BUZZER_num)//·äÃùÆ÷Ê±¼ä
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 24  

1418   2            buzzer=1;//¿ªÆô·äÃùÆ÷
1419   2          else
1420   2          {
1421   3            buzzer=0;//¹Ø±Õ·äÃùÆ÷
1422   3            BUZZER_flag=0;//·äÃùÆ÷ÒÑ¾­¹Ø±Õ£¬±êÖ¾Î»ÖØÖÃÎª0 
1423   3          }
1424   2        }
1425   1      }
1426          //¶ÁÈ¡adc
1427          void f2_Get_ADC(INT16U adc_flag)
1428          {
1429   1        if(guc_AdcFlag==1)              //ADC×ª»»½áÊø
1430   1          { 
1431   2            ADC_0 = SCR0;//ÓÒÂÖSCR0
1432   2            ADC_1 = SCR1;//×óÂÖSCR1
1433   2            ADC_2 = SCR2;//·ç»úSCR2
1434   2            ADC_3 = SCR3;//±ßË¢SCR3
1435   2            ADC_4 = SCR4;//µç³ØSCR4
1436   2            ADC_5 = SCR5;//×óµØ¼ìSCR4
1437   2            ADC_6 = SCR6;//ÖÐµØ¼ìSCR4
1438   2            ADC_7 = SCR7;//ÓÒµØ¼ìSCR4
1439   2      
1440   2            if(adc_flag==1)
1441   2            {
1442   3              ADCC0 &= ~0x01;
1443   3              ADCC0 |= 0x01;            //´ò¿ªADC×ª»»µçÔ´,ÄÚ²¿4V²Î¿¼µçÑ¹
1444   3            }
1445   2              
1446   2            if(adc_flag==0)
1447   2            {
1448   3              ADCC0 &= ~0x01;
1449   3              ADCC0 |= 0x00;
1450   3            }
1451   2            guc_AdcFlag = 0;            //±êÖ¾Î»Çå0 
1452   2            IE1 |= 0x40;                //´ò¿ªADCÖÐ¶Ï
1453   2            ADCC0 &= ~0x20; 
1454   2            ADCC0 |= 0x40;  
1455   2      
1456   2          }
1457   1      }
1458          
1459          
1460          void bubbleSort(int *src, int n)
1461          {
1462   1        int i = 0, j = 0, tmp = 0;
1463   1        for(i = n - 1; i > 0; --i){
1464   2          for(j = 0; j < i; ++j){
1465   3            if(src[j] > src[j + 1]){
1466   4              tmp = src[j];
1467   4              src[j] = src[j + 1];
1468   4              src[j + 1] = tmp;     //Êý¾Ý½»»»
1469   4            }
1470   3          }
1471   2        }
1472   1      }
1473          
1474          
1475          void ADC_Rpt() interrupt ADC_VECTOR//µçÁ÷×ª»»
1476          {
1477   1          guc_AdcFlag = 1;                    //ADC×ª»»½áÊø
1478   1          IE1 &=~ 0x40;                       //¹Ø±ÕADCÖÐ¶Ï
1479   1          ADCC0 &=~ 0x20;           //Çå³ýADCÖÐ¶Ï±êÖ¾Î»ADCC0 &=~ 0x20;  
C51 COMPILER V9.60.0.0   TASK2                                                             02/22/2021 15:08:10 PAGE 25  

1480   1      
1481   1          
1482   1      } 
1483          
1484          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5272    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    124       6
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      3       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
